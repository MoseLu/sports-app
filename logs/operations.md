# 项目操作日志

## 2025-04-28 10:05:22

- 初始化项目
  - 创建项目目录结构
  - 初始化Git仓库
  - 配置开发环境
  - 设置项目依赖

## 2025-04-28 14:20:10

- 创建项目文档
  - 创建里程碑文档
  - 创建架构文档
  - 创建操作日志
  - 创建API文档模板

## 2025-04-28 15:05:00

- 实现了注册页面功能
  - 添加了用户注册表单
  - 实现了表单验证功能

## 2025-04-28 15:25:00

- 实现了登录页面功能
  - 添加了用户登录表单
  - 实现了表单验证功能

## 2025-04-28 16:30:45

- 初始化后端项目
  - 创建项目基础结构
  - 配置Go-Gin框架
  - 设置数据库连接
  - 实现用户模型
  - 配置基础路由
  - 设置中间件

## 2025-04-28 22:04:05

- 删除了项目根目录下的 `.gitignore` 文件

## 2025-04-28 23:35:00

- 创建了前端页面组件
  - 创建了 `LoginPage.vue` 登录页面
  - 创建了 `RegisterPage.vue` 注册页面
  - 创建了 `DashboardPage.vue` 仪表盘页面
  - 创建了 `IndexPage.vue` 首页
  - 创建了 `ErrorNotFound.vue` 404错误页面

## 2025-04-28 23:44:00

- 创建了前端项目基础结构
  - 创建了 `src` 目录及其子目录（pages, components, stores, i18n, boot, css, router, layouts, assets）
  - 创建了项目配置文件（package.json, tsconfig.json, quasar.config.ts等）
  - 创建了 `public` 目录和 `index.html`

## 2025-04-29 10:15:30

- 实现JWT RSA加密
  - 更新JWT工具实现RSA算法
  - 创建RSA密钥生成脚本
  - 更新认证中间件
  - 更新token验证逻辑

## 2025-04-29 11:35:14

- 更新了项目文档
  - 更新了 `README.md` 文件，添加了更详细的项目说明和功能描述
  - 创建了中文版 `README.zh-CN.md` 文档

## 2025-04-29 11:35:43

- 优化了操作日志
  - 修正了操作日志的时间顺序
  - 确保所有操作按时间正序排列

## 2025-04-29 11:45:00

- 实现了后端用户认证功能
  - 创建了 JWT 认证工具
  - 实现了用户登录接口
  - 实现了用户注册接口
  - 添加了密码加密功能
  - 配置了数据库连接
  - 更新了后端项目文档

## 2025-04-29 13:52:09

- 初始化后端项目
  - 创建基础项目结构
  - 配置MySQL数据库连接
  - 实现用户模型，添加时区字段
  - 创建项目文档（架构文档、里程碑文档、变更日志）
  - 初始化git仓库并提交代码

## 2025-04-29 14:08:12

- 优化后端性能

  - 优化数据库连接池配置
  - 优化SQL查询
  - 优化密码加密过程
  - 减少不必要的日志记录

- 完善了前端路由系统
  - 更新了路由配置，添加了更多路由（profile, statistics, community, settings）
  - 实现了路由守卫和权限控制
  - 添加了页面访问历史记录功能
  - 实现了路由懒加载
  - 更新了项目架构文档和里程碑文档

## 2025-04-29 14:15:00

- 增强了JWT安全性
  - 更新了JWT工具，使用RSA算法替代HMAC
  - 创建了RSA密钥对生成脚本
  - 更新了配置文件，添加JWT相关配置项
  - 实现了私钥和公钥的自动加载功能

## 2025-04-29 15:30:00

- 实现了后端注册功能
  - 创建了用户注册控制器
  - 实现了用户名和邮箱唯一性检查
  - 实现了密码加密存储
  - 添加了用户创建成功后的JWT token生成
  - 实现了注册接口的错误处理

## 2025-04-29 16:45:00

- 实现了后端登录功能
  - 创建了用户登录控制器
  - 实现了用户名/密码验证
  - 实现了登录成功后的JWT token生成
  - 添加了最后登录时间更新
  - 实现了登录接口的错误处理
  - 添加了登录日志记录

## 2025-04-29 20:13:55

- 更新后端README文档

  - 简化项目概述
  - 更新项目结构
  - 添加性能优化说明
  - 更新API文档
  - 简化部署说明

- 更新里程碑文档

  - 添加项目概述
  - 更新最新里程碑记录
  - 添加进行中任务
  - 更新项目状态
  - 添加下一步计划

- 更新项目架构文档
  - 重新组织文档结构
  - 更新系统架构图
  - 详细说明技术选型
  - 添加核心模块说明
  - 增加安全设计部分
  - 补充部署架构
  - 添加扩展性设计
  - 增加监控与运维部分

## 2025-04-30 09:44:33

1. 修复 `ExerciseForm.vue` 中的类型错误：
   - 修改 `date` 字段的类型处理，使用类型断言确保为 string 类型
   - 修改 `distance` 字段的默认值为 0
   - 添加 `userId` 字段到表单数据中
   - 使用类型断言 `as Omit<Exercise, 'id'>` 确保整个对象符合目标类型

## 2025-04-30 09:45:00

- 清理项目结构
  - 删除重复文件
  - 删除空目录
  - 更新文件引用路径

## 2025-04-30 10:18:29

- 更新项目文档
  - 更新架构文档 (`architecture.md`)
    - 更新项目结构
    - 更新技术栈
    - 完善核心模块描述
    - 添加性能优化策略
    - 更新部署架构
    - 添加扩展性设计
  - 更新里程碑文档 (`milestones.md`)
    - 添加前端基础架构优化完成记录
    - 更新进行中的任务状态
    - 更新待开发功能状态
    - 更新项目状态
    - 调整下一步计划
    - 简化时间线

## 2025-05-05 10:09:37

- 优化底部导航栏图标
  - 创建专门的`tabbar`目录存放底部导航栏图标
  - 移动底部导航栏相关图标到`tabbar`目录
    - 移动`dashboard-active.svg`和`dashboard-inactive.svg`
    - 移动`profile-active.svg`和`profile-inactive.svg`
    - 移动`community-active.svg`和`community-inactive.svg`
  - 更新`MainLayout.vue`中的图标引用路径
    - 修改所有底部导航栏图标的导入路径为`tabbar`目录
    - 保持其他功能图标（语言切换、深色模式、登出）在`common`目录

## 2025-05-05 10:11:40

- 清理项目配置文件
  - 删除多余的Quasar配置文件
    - 删除`quasar.config.js`（保留TypeScript版本）
    - 删除所有`quasar.config.js.temporary.compiled.*.mjs`临时文件
  - 保留`quasar.config.ts`作为主配置文件

## 2025-05-05 10:12:38

- 配置国际化功能
  - 创建`src/boot/i18n.ts`引导文件
    - 配置Vue I18n
    - 设置默认语言为中文
    - 添加语言切换功能
  - 创建`src/i18n`目录及语言文件
    - 创建`index.ts`导出语言包
    - 创建`zh-CN.ts`中文语言包
    - 创建`en-US.ts`英文语言包
  - 实现基础翻译功能
    - 添加通用文本翻译
    - 添加认证相关文本翻译

## 2025-05-05 10:14:32

- 配置SVG支持
  - 安装`vite-plugin-vue-svg`插件
    - 使用`--legacy-peer-deps`选项解决依赖冲突
  - 更新`vite.config.ts`配置
    - 添加SVG插件配置
    - 配置路径别名
    - 配置Quasar插件

## 2025-05-05 10:15:31

- 添加类型声明支持
  - 创建`src/types/vite-plugin-vue-svg.d.ts`类型声明文件
    - 定义`vite-plugin-vue-svg`模块的类型
    - 声明插件函数和配置选项类型
  - 更新`tsconfig.json`配置
    - 添加`typeRoots`配置
    - 包含`src/types`目录

## 2025-05-05 10:20:56

- 创建应用Logo
  - 创建`src/assets/icons/logo`目录
  - 设计并创建Logo SVG文件
    - 创建`logo-light.svg`亮色主题Logo
      - 使用圆形边框设计
      - 添加Re字母组合
      - 添加装饰性圆点
    - 创建`logo-dark.svg`暗色主题Logo
      - 继承基础设计
      - 添加动画发光效果
  - 更新`MainLayout.vue`
    - 替换文本标题为Logo图标
    - 添加主题自适应切换
    - 调整Logo样式和布局

## 2025-05-05 10:22:31

- 优化语言切换功能
  - 移除语言切换下拉菜单
  - 实现直接切换中英文
    - 点击语言图标直接在中英文间切换
    - 保持语言设置的本地存储功能
  - 简化用户界面
    - 移除多余的菜单组件
    - 优化用户交互体验

## 2025-05-05 10:25:00

- 清理代码
  - 移除未使用的变量
    - 删除`languageMenuOpen`变量
  - 优化代码结构
    - 减少不必要的状态管理
    - 提高代码质量

## 2025-05-05 11:50:53

- 调整底部导航栏顺序
  - 将个人资料移至最右侧
  - 社区移至中间位置
  - 保持首页在最左侧

## 2025-05-05 11:53:42

- 修正 API 路径
  - 修正个人资料 API 路径
    - 将 `/api/user/profile` 改为 `/api/users/profile`
  - 修正社区 API 路径
    - 将 `/api/api/posts` 改为 `/api/posts`

## 2025-05-05 16:43:01

- 实现错误日志系统
  - 前端修改
    - 修改 `src/boot/axios.ts`
      - 添加 `ErrorResponse` 接口定义
      - 优化错误日志发送逻辑，避免重复发送
      - 修复 TypeScript 类型错误
      - 改进错误消息显示逻辑
  - 后端修改
    - 创建 `models/error_log.go`
      - 定义 `ErrorLog` 模型
      - 包含字段：ID、ErrorType、Message、StatusCode、Path、Method、RequestBody、ResponseBody、CreatedAt
    - 创建 `controllers/error_log.go`
      - 实现 `ErrorLogController`
      - 添加错误日志创建接口
      - 添加默认值处理
      - 改进错误响应格式
    - 更新 `routes/routes.go`
      - 添加错误日志路由 `/api/errors`
      - 配置错误日志控制器
    - 更新 `main.go`
      - 添加 `ErrorLog` 模型到数据库迁移
  - 功能说明
    - 实现了统一的错误日志记录系统
    - 前端自动记录 HTTP 请求错误
    - 后端提供错误日志存储和查询接口
    - 优化了错误处理和显示逻辑
  - 注意事项
    - 错误日志接口不需要认证
    - 避免重复发送错误日志导致前端崩溃
    - 统一使用 `message` 字段返回错误信息

## 2025-05-06 16:23:50

- 优化 axios 配置和错误处理
  - 修改 `src/boot/axios.ts`
    - 优化 baseURL 配置，移除重复的 `/api` 前缀
    - 添加请求拦截器，统一添加 token
    - 完善响应拦截器
      - 处理 401 未授权错误，自动跳转登录页
      - 处理 404 资源不存在错误，自动跳转登录页
      - 优化错误日志记录，避免重复发送
      - 统一错误提示格式
    - 添加全局错误通知组件
  - 优化退出功能
    - 添加退出成功提示弹窗
    - 优化提示弹窗样式
      - 调整弹窗高度为32px
      - 添加内边距
      - 实现文字垂直居中
    - 使用封装好的 showSuccess 组件
  - 统一错误处理
    - 创建 `src/services/error-handler.ts`
      - 实现 handleError 函数处理通用错误
      - 实现 showSuccess 函数显示成功提示
      - 实现 showWarning 函数显示警告提示
    - 添加全局样式
      - 在 `src/css/app.scss` 中添加 success-notify 样式
      - 优化提示框样式和布局

## 2025-05-06 17:22:57

- 优化重置密码页面
  - 改进邮箱验证逻辑，添加实时验证
  - 优化验证码按钮交互，改为提示用户而不是直接禁用
  - 增加输入框宽度，优化整体布局
  - 调整输入框高度和间距，提升用户体验
  - 优化字体大小和图标对齐
  - 完善错误提示和加载状态

## 2025-05-06 17:28:25

- 实现邮箱验证码服务
  - 创建邮箱配置模块
    - 配置SMTP服务器信息
    - 支持QQ邮箱作为默认服务
  - 实现邮箱服务
    - 使用gomail库发送邮件
    - 生成6位随机验证码
    - 设计美观的邮件模板
  - 实现验证码存储服务
    - 使用内存存储验证码
    - 实现5分钟有效期
    - 自动清理过期验证码
  - 实现验证码控制器
    - 添加发送验证码接口
    - 添加验证验证码接口
    - 完善错误处理和响应
  - 更新路由配置
    - 添加验证码相关路由
    - 配置API路径

## 2025-05-06 17:37:47

- 更新前端页面
  - 修改注册页面
    - 添加邮箱后缀限制（仅支持QQ和Outlook）
    - 优化邮箱验证规则
    - 添加友好的错误提示
  - 完善重置密码页面
    - 添加邮箱后缀限制
    - 实现验证码发送功能
    - 添加新密码和确认密码输入
    - 完善表单验证规则
    - 优化用户交互流程
    - 对接后端验证码API

## 2025-05-07 09:30:04

- 优化密码重置功能
  - 后端修改
    - 创建 `models/verification.go`
      - 定义 `Verification` 模型
      - 包含字段：ID、Email、Code、ExpiresAt、CreatedAt、UpdatedAt
    - 创建 `services/verification_service.go`
      - 实现 `VerificationService`
      - 添加数据库存储验证码功能
      - 实现验证码验证和自动清理
      - 添加邮件发送功能（模拟）
    - 更新 `services/auth.go`
      - 优化 `ResetPassword` 方法
      - 添加用户名返回功能
      - 改进错误处理
    - 更新 `controllers/auth.go`
      - 优化 `ResetPassword` 控制器
      - 添加用户名返回
      - 完善错误处理
  - 前端修改
    - 优化 `ResetPasswordPage.vue`
      - 添加用户名自动填充功能
      - 优化表单验证
      - 改进错误提示
    - 更新 `LoginPage.vue`
      - 添加用户名自动填充
      - 优化表单验证
      - 完善错误处理
  - 数据库修改
    - 创建 `verifications` 表
      - 添加必要的索引
      - 设置字段约束
      - 配置自动清理过期数据
  - 功能说明
    - 实现了完整的密码重置流程
    - 添加了验证码存储和验证功能
    - 优化了用户体验和错误处理
    - 实现了用户名自动填充功能
  - 注意事项
    - 验证码有效期为10分钟
    - 验证成功后自动删除验证码
    - 密码重置成功后自动填充用户名
    - 优化了数据库查询性能

## 2025/05/09 09:57:18

- 完善仪表盘页面功能
  - 添加运动记录列表
  - 实现运动类型筛选
  - 添加时间范围筛选
  - 优化数据展示效果

## 2025/05/09 09:58:35

- 修复仪表盘页面数据加载问题
  - 优化数据请求逻辑
  - 改进错误处理机制
  - 提升页面加载性能

## 2025/05/09 09:59:23

- 优化仪表盘页面表格布局
  - 修复表格固定列遮挡悬浮按钮的问题
  - 调整表格高度自适应，确保不会超出视口
  - 优化表格样式，使用更合理的颜色方案
  - 改进表格的响应式布局

## 2025/05/09 10:30:00

### 仪表盘页面优化

#### 前端更改

1. ExerciseStats.vue 组件优化：

   - 调整布局为两列显示（col-6）
   - 优化卡片样式，添加悬停效果
   - 添加响应式设计，适配移动端
   - 优化图表 tooltip 显示
   - 添加时间范围和运动类型筛选功能

2. ExerciseList.vue 组件优化：

   - 添加表格边框样式
   - 优化筛选功能，修复运动类型筛选
   - 添加响应式设计
   - 优化表格样式，支持暗色模式

3. 全局样式优化：

   - 创建 table.scss 全局样式文件
   - 优化表格在亮色/暗色模式下的显示
   - 添加单元格边框样式
   - 统一表格样式配置

4. 路由配置优化：
   - 移除 defineRouter 包装器
   - 优化路由守卫逻辑
   - 修复 Pinia 和路由的初始化顺序

#### 后端更改

1. 运动记录统计接口优化：

   - 添加时间范围筛选（周/月/年）
   - 添加运动类型筛选
   - 优化统计数据计算逻辑
   - 添加每日统计数据

2. 数据模型优化：
   - 完善运动记录关联查询
   - 优化统计数据结构
   - 添加运动类型关联

### 技术细节

1. 前端：

   - 使用 Quasar 框架的 q-table 组件
   - 使用 ECharts 实现数据可视化
   - 使用 Pinia 进行状态管理
   - 使用 Vue Router 进行路由管理

2. 后端：
   - 使用 Go 语言开发
   - 使用 GORM 进行数据库操作
   - 实现 RESTful API
   - 优化数据库查询性能

### 待优化项

1. 前端：

   - 进一步优化移动端显示
   - 添加更多数据可视化图表
   - 优化筛选功能的用户体验

2. 后端：
   - 添加更多统计维度
   - 优化大数据量下的查询性能
   - 添加数据缓存机制

## 2025/05/09 10:46:17

- 优化仪表盘页面表格布局
  - 修复表格固定列遮挡悬浮按钮的问题
  - 调整表格高度自适应，确保不会超出视口
  - 优化表格样式，使用更合理的颜色方案
  - 改进表格的响应式布局
